<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mission Control</title>
  <style>
    :root{--bg:#0b0f14;--panel:#121821;--text:#e7eef7;--muted:#9fb0c3;--accent:#4aa3ff;--ok:#22c55e;--warn:#f59e0b;--err:#ef4444;}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;background:var(--bg);color:var(--text);}
    header{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #1f2a37;}
    h1{margin:0;font-size:20px;}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px;padding:16px;}
    .card{background:var(--panel);border:1px solid #1f2a37;border-radius:12px;padding:16px;}
    .span-4{grid-column:span 4;}
    .span-6{grid-column:span 6;}
    .span-8{grid-column:span 8;}
    .span-12{grid-column:span 12;}
    .muted{color:var(--muted);}
    .row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #1f2a37;}
    .row:last-child{border-bottom:none;}
    .badge{padding:2px 8px;border-radius:999px;font-size:12px;}
    .ok{background:rgba(34,197,94,.15);color:var(--ok);}
    .warn{background:rgba(245,158,11,.15);color:var(--warn);}
    .err{background:rgba(239,68,68,.15);color:var(--err);}
    button{background:var(--accent);color:#081018;border:none;border-radius:8px;padding:8px 12px;cursor:pointer;font-weight:600;}
    pre{white-space:pre-wrap;word-break:break-word;background:#0f1620;border:1px solid #1f2a37;border-radius:8px;padding:10px;color:#cfe4ff;}
  </style>
</head>
<body>
  <header>
    <h1>Mission Control</h1>
    <div class="muted">Status: <span id="status">idle</span></div>
  </header>

  <div class="grid">
    <div class="card span-4">
      <h3>Agents</h3>
      <div id="agents"></div>
    </div>

    <div class="card span-4">
      <h3>Tasks</h3>
      <div id="tasks"></div>
    </div>

    <div class="card span-4">
      <h3>Decisions</h3>
      <div id="decisions"></div>
    </div>

    <div class="card span-8">
      <h3>Activity Feed</h3>
      <div id="feed"></div>
    </div>

    <div class="card span-4">
      <h3>Controls</h3>
      <button onclick="loadData()">Refresh</button>
      <p class="muted">Data file: project/mission_control/ui/data.json</p>
    </div>

    <div class="card span-12">
      <h3>Raw Data</h3>
      <pre id="raw"></pre>
    </div>
  </div>

  <script>
    async function loadData(){
      document.getElementById('status').textContent = 'loading';
      const res = await fetch('data.json?_=' + Date.now());
      const data = await res.json();
      document.getElementById('status').textContent = 'ready';

      const agents = document.getElementById('agents');
      agents.innerHTML='';
      data.agents.forEach(a=>{
        const row=document.createElement('div');
        row.className='row';
        row.innerHTML=`<div>${a.name}</div><div class="badge ${a.status}">${a.status}</div>`;
        agents.appendChild(row);
      });

      const tasks = document.getElementById('tasks');
      tasks.innerHTML='';
      data.tasks.forEach(t=>{
        const row=document.createElement('div');
        row.className='row';
        row.innerHTML=`<div>${t.title}</div><div class="badge ${t.status}">${t.status}</div>`;
        tasks.appendChild(row);
      });

      const decisions = document.getElementById('decisions');
      decisions.innerHTML='';
      data.decisions.forEach(d=>{
        const row=document.createElement('div');
        row.className='row';
        row.innerHTML=`<div>${d.title}</div><div class="muted">${d.date}</div>`;
        decisions.appendChild(row);
      });

      const feed = document.getElementById('feed');
      feed.innerHTML='';
      data.feed.forEach(f=>{
        const row=document.createElement('div');
        row.className='row';
        row.innerHTML=`<div>${f.text}</div><div class="muted">${f.time}</div>`;
        feed.appendChild(row);
      });

      document.getElementById('raw').textContent = JSON.stringify(data,null,2);
    }
    loadData();
  </script>
</body>
</html>
